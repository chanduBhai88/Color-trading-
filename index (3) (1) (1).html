<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Big/Small Predictor</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
      color: #ffffff;
      text-align: center;
      padding: 20px;
      min-height: 100vh;
      margin: 0;
    }
    
    h1 {
      color: #00d4ff;
      margin-bottom: 30px;
      text-shadow: 0px 0px 20px #00d4ff;
      font-size: 2.2em;
      font-weight: 300;
    }
    
    .controls {
      margin: 30px 0;
    }
    
    .btn {
      padding: 15px 30px;
      margin: 8px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      border-radius: 25px;
      transition: all 0.3s ease;
      font-size: 18px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    
    .big-btn { 
      background: linear-gradient(45deg, #ff416c, #ff4b2b);
      color: white;
    }
    
    .small-btn { 
      background: linear-gradient(45deg, #4facfe, #00f2fe);
      color: white;
    }
    
    .clear-btn { 
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
    }
    
    .btn:hover { 
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
    }

    .stats-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .stat-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      padding: 15px 25px;
      border-radius: 15px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .history {
      margin: 20px auto;
      max-width: 600px;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(15px);
      padding: 20px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .recent-results {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    
    .result-dot {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    
    .dot-big { background: linear-gradient(45deg, #ff416c, #ff4b2b); }
    .dot-small { background: linear-gradient(45deg, #4facfe, #00f2fe); }
    
    .prediction-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 30px auto;
    }
    
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(20px);
      padding: 25px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.15);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #00d4ff, #ff416c, #4facfe);
    }
    
    .card:hover { 
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,212,255,0.3);
    }
    
    .big { color: #ff416c; font-weight: bold; }
    .small { color: #4facfe; font-weight: bold; }
    
    .accuracy {
      font-size: 0.9em;
      opacity: 0.8;
      margin-top: 10px;
    }
    
    .confidence-bar {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #00d4ff, #4facfe);
      border-radius: 10px;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body>
  <h1>üéØ Advanced Big/Small Predictor</h1>

  <div class="controls">
    <button class="btn big-btn" onclick="addResult('Big')">üî¥ Big</button>
    <button class="btn small-btn" onclick="addResult('Small')">üîµ Small</button>
    <button class="btn clear-btn" onclick="clearHistory()">üóëÔ∏è Reset</button>
  </div>

  <div class="stats-container">
    <div class="stat-card">
      <div>Total: <span id="totalCount">0</span></div>
    </div>
    <div class="stat-card">
      <div>Big: <span id="bigCount" class="big">0</span></div>
    </div>
    <div class="stat-card">
      <div>Small: <span id="smallCount" class="small">0</span></div>
    </div>
    <div class="stat-card">
      <div>Accuracy: <span id="overallAccuracy">0%</span></div>
    </div>
  </div>

  <div class="history">
    <h3>Recent Results (Last 20)</h3>
    <div class="recent-results" id="recentResults">
      <p style="opacity: 0.6;">No results yet...</p>
    </div>
  </div>

  <div class="prediction-grid">
    <div class="card" id="prediction1"></div>
    <div class="card" id="prediction2"></div>
    <div class="card" id="prediction3"></div>
    <div class="card" id="prediction4"></div>
  </div>

  <script>
    let history = [];
    let predictions = [];
    let correctPredictions = [0, 0, 0, 0];

    function addResult(result) {
      // Check previous predictions accuracy
      if (predictions.length > 0) {
        predictions.forEach((pred, index) => {
          if (pred === result) {
            correctPredictions[index]++;
          }
        });
      }

      history.unshift(result);
      if (history.length > 100) history.pop(); // keep last 100
      
      updateStats();
      updateRecentResults();
      makePredictions();
    }

    function clearHistory() {
      history = [];
      predictions = [];
      correctPredictions = [0, 0, 0, 0];
      updateStats();
      updateRecentResults();
      clearPredictions();
    }

    function updateStats() {
      let total = history.length;
      let bigCount = history.filter(r => r === "Big").length;
      let smallCount = total - bigCount;
      let accuracy = total > 0 ? ((correctPredictions.reduce((a,b) => a+b, 0) / (predictions.length * 4)) * 100) : 0;
      
      document.getElementById("totalCount").textContent = total;
      document.getElementById("bigCount").textContent = bigCount;
      document.getElementById("smallCount").textContent = smallCount;
      document.getElementById("overallAccuracy").textContent = accuracy.toFixed(1) + "%";
    }

    function updateRecentResults() {
      let container = document.getElementById("recentResults");
      if (history.length === 0) {
        container.innerHTML = '<p style="opacity: 0.6;">No results yet...</p>';
        return;
      }
      
      let recent = history.slice(0, 20);
      container.innerHTML = recent.map(result => 
        `<div class="result-dot dot-${result.toLowerCase()}">${result[0]}</div>`
      ).join('');
    }

    function clearPredictions() {
      for (let i = 1; i <= 4; i++) {
        document.getElementById("prediction" + i).innerHTML = "";
      }
    }

    function getRecommendedInputs() {
      if (history.length < 10) return "10+ inputs needed for basic accuracy";
      if (history.length < 25) return "25+ inputs recommended for good accuracy";
      if (history.length < 50) return "50+ inputs for excellent accuracy";
      return "Optimal data size reached!";
    }

    function makePredictions() {
      let inputRecommendation = getRecommendedInputs();
      
      if (history.length < 3) {
        for (let i = 1; i <= 4; i++) {
          document.getElementById("prediction" + i).innerHTML = 
            `<h3>Algorithm ${i}</h3><p style="opacity: 0.6;">Need at least 3 results</p><p style="color: #ffcc00; font-size: 0.9em;">${inputRecommendation}</p>`;
        }
        return;
      }

      predictions = [];

      // Algorithm 1: Advanced Frequency with Momentum
      let recentWindow = Math.min(15, history.length);
      let recentHistory = history.slice(0, recentWindow);
      let bigCount = recentHistory.filter(r => r === "Big").length;
      let smallCount = recentWindow - bigCount;
      let momentum = (bigCount - smallCount) / recentWindow;
      let freqPrediction = momentum > 0.1 ? "Big" : momentum < -0.1 ? "Small" : (Math.random() > 0.5 ? "Big" : "Small");
      let freqConfidence = Math.min(95, Math.abs(momentum) * 200 + 55);
      predictions.push(freqPrediction);

      // Algorithm 2: Anti-Streak with Adaptive Threshold
      let streakLength = 1;
      for (let i = 1; i < history.length && history[i] === history[0]; i++) {
        streakLength++;
      }
      let streakThreshold = Math.max(2, Math.min(5, Math.floor(history.length / 10)));
      let streakPrediction = streakLength >= streakThreshold ? 
        (history[0] === "Big" ? "Small" : "Big") : history[0];
      let streakConfidence = Math.min(95, streakLength * 15 + 45);
      predictions.push(streakPrediction);

      // Algorithm 3: Multi-Pattern Recognition
      let patternPrediction = "Big"; // default
      let patternConfidence = 50;
      
      if (history.length >= 6) {
        // Check for alternating patterns
        let isAlternating = true;
        for (let i = 0; i < Math.min(6, history.length - 1); i++) {
          if (history[i] === history[i + 1]) {
            isAlternating = false;
            break;
          }
        }
        
        if (isAlternating) {
          patternPrediction = history[0] === "Big" ? "Small" : "Big";
          patternConfidence = 85;
        } else {
          // Look for 2-2 or 3-3 patterns
          let last4 = history.slice(0, 4);
          if (last4.length === 4) {
            if (last4[0] === last4[1] && last4[2] === last4[3] && last4[0] !== last4[2]) {
              patternPrediction = last4[0];
              patternConfidence = 75;
            }
          }
        }
      }
      predictions.push(patternPrediction);

      // Algorithm 4: Machine Learning-like Weighted Decision
      let weights = {
        freq: 0.4,
        streak: 0.3,
        pattern: 0.3
      };
      
      let bigScore = 0;
      bigScore += (freqPrediction === "Big" ? weights.freq : -weights.freq);
      bigScore += (streakPrediction === "Big" ? weights.streak : -weights.streak);
      bigScore += (patternPrediction === "Big" ? weights.pattern : -weights.pattern);
      
      let finalPrediction = bigScore > 0 ? "Big" : "Small";
      let finalConfidence = Math.min(95, Math.abs(bigScore) * 100 + 55);
      predictions.push(finalPrediction);

      // Calculate individual accuracies
      let accuracies = correctPredictions.map((correct, index) => 
        predictions.length > 0 ? (correct / Math.max(1, predictions.length)) * 100 : 0
      );

      // Update UI with input recommendations
      let inputRec = getRecommendedInputs();
      
      document.getElementById("prediction1").innerHTML = `
        <h3>üßÆ Frequency + Momentum</h3>
        <p>Prediction: <span class="${freqPrediction.toLowerCase()}">${freqPrediction}</span></p>
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: ${freqConfidence}%"></div>
        </div>
        <p>Confidence: ${freqConfidence.toFixed(0)}%</p>
        <div class="accuracy">Accuracy: ${accuracies[0].toFixed(1)}%</div>
        <div style="color: #ffcc00; font-size: 0.85em; margin-top: 8px;">${inputRec}</div>
      `;

      document.getElementById("prediction2").innerHTML = `
        <h3>‚ö° Anti-Streak</h3>
        <p>Prediction: <span class="${streakPrediction.toLowerCase()}">${streakPrediction}</span></p>
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: ${streakConfidence}%"></div>
        </div>
        <p>Confidence: ${streakConfidence.toFixed(0)}%</p>
        <div class="accuracy">Accuracy: ${accuracies[1].toFixed(1)}%</div>
        <div style="color: #ffcc00; font-size: 0.85em; margin-top: 8px;">Best after 15+ inputs</div>
      `;

      document.getElementById("prediction3").innerHTML = `
        <h3>üîç Pattern Recognition</h3>
        <p>Prediction: <span class="${patternPrediction.toLowerCase()}">${patternPrediction}</span></p>
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: ${patternConfidence}%"></div>
        </div>
        <p>Confidence: ${patternConfidence.toFixed(0)}%</p>
        <div class="accuracy">Accuracy: ${accuracies[2].toFixed(1)}%</div>
        <div style="color: #ffcc00; font-size: 0.85em; margin-top: 8px;">Needs 20+ for patterns</div>
      `;

      document.getElementById("prediction4").innerHTML = `
        <h3>ü§ñ AI Fusion</h3>
        <p>Prediction: <span class="${finalPrediction.toLowerCase()}">${finalPrediction}</span></p>
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: ${finalConfidence}%"></div>
        </div>
        <p>Confidence: ${finalConfidence.toFixed(0)}%</p>
        <div class="accuracy">Accuracy: ${accuracies[3].toFixed(1)}%</div>
        <div style="color: #ffcc00; font-size: 0.85em; margin-top: 8px;">Most accurate after 30+ inputs</div>
      `;
    }

    // Initialize
    clearPredictions();
  </script>
</body>
</html>