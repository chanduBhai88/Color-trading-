<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IN999 Pattern Analyzer</title>
    <style>
        body {
            background-color: #0a0a0a;
            color: #0f0;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 255, 0, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 0, 0.05) 0%, transparent 20%);
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid #0f0;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
        }

        h1 {
            text-align: center;
            text-shadow: 0 0 5px #0f0;
            margin-bottom: 30px;
            position: relative;
        }

        h1::after {
            content: "";
            display: block;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, #0f0, transparent);
            margin-top: 10px;
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .choice-btn {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 15px 30px;
            font-size: 20px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            min-width: 120px;
            text-align: center;
        }

        .choice-btn:hover {
            background-color: #0f0;
            color: #000;
            text-shadow: 0 0 5px #000;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
        }

        .choice-btn::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.4), transparent);
            transition: all 0.5s;
        }

        .choice-btn:hover::after {
            left: 100%;
        }

        .result {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #0f0;
            min-height: 100px;
            position: relative;
        }

        .result-title {
            position: absolute;
            top: -10px;
            left: 20px;
            background-color: #0a0a0a;
            padding: 0 10px;
        }

        .big {
            color: #0f0;
            font-weight: bold;
            text-shadow: 0 0 5px #0f0;
        }

        .small {
            color: #f00;
            font-weight: bold;
            text-shadow: 0 0 5px #f00;
        }

        .stats {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .stat-box {
            border: 1px solid #0f0;
            padding: 15px;
            width: 30%;
            margin-bottom: 15px;
            position: relative;
        }

        .stat-box h3 {
            margin-top: 0;
            border-bottom: 1px solid #0f0;
            padding-bottom: 5px;
        }

        .matrix {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 20px;
        }

        .matrix-cell {
            border: 1px solid rgba(0, 255, 0, 0.3);
            padding: 5px;
            text-align: center;
            font-size: 12px;
        }

        .matrix-cell.big {
            background-color: rgba(0, 255, 0, 0.1);
        }

        .matrix-cell.small {
            background-color: rgba(255, 0, 0, 0.1);
        }

        /* New styles for 7-digit input */
        .digit-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .digit-btn {
            width: 40px;
            height: 40px;
            font-size: 18px;
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .digit-btn.selected-big {
            background-color: rgba(0, 255, 0, 0.2);
            color: #0f0;
        }

        .digit-btn.selected-small {
            background-color: rgba(255, 0, 0, 0.2);
            color: #f00;
        }

        .submit-btn {
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 10px 20px;
            margin-top: 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }

        .submit-btn:hover {
            background-color: #0f0;
            color: #000;
        }

        @media (max-width: 768px) {
            .stat-box {
                width: 100%;
            }
            
            .matrix {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .choice-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .digit-input {
                flex-wrap: wrap;
            }
        }

        /* Hacker animation effects */
        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                rgba(0, 255, 0, 0.05) 50%, 
                transparent 100%);
            background-size: 100% 8px;
            animation: scan 8s linear infinite;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .glitch {
            animation: glitch 1s linear infinite;
        }

        @keyframes glitch {
            0% { text-shadow: 2px 0 #0f0, -2px 0 #f00; }
            25% { text-shadow: -2px 0 #0f0, 2px 0 #f00; }
            50% { text-shadow: 2px 0 #f00, -2px 0 #0f0; }
            75% { text-shadow: -2px 0 #f00, 2px 0 #0f0; }
            100% { text-shadow: 2px 0 #0f0, -2px 0 #f00; }
        }
    </style>
</head>
<body>
    <div class="scanline"></div>
    
    <div class="container">
        <h1 class="glitch">IN999 PATTERN ANALYZER</h1>
        
        <div class="digit-input" id="digitInput">
            <!-- 7 digit buttons will be added here -->
        </div>
        <button class="submit-btn" id="submitBtn">ANALYZE PATTERN</button>
        
        <div class="result">
            <div class="result-title">PREDICTION RESULT</div>
            <div id="predictionResult">Enter 7-digit pattern and click Analyze</div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <h3>TOTAL STATS</h3>
                <p>Big: <span class="big" id="totalBig">0</span></p>
                <p>Small: <span class="small" id="totalSmall">0</span></p>
                <p>Total Rounds: <span id="totalRounds">0</span></p>
            </div>
            
            <div class="stat-box">
                <h3>RECENT TREND</h3>
                <p>Last 50: <span id="last50Trend">-</span></p>
                <p>Last 20: <span id="last20Trend">-</span></p>
                <p>Last 10: <span id="last10Trend">-</span></p>
            </div>
            
            <div class="stat-box">
                <h3>PATTERN ANALYSIS</h3>
                <p>Max Big Streak: <span class="big" id="maxBigStreak">0</span></p>
                <p>Max Small Streak: <span class="small" id="maxSmallStreak">0</span></p>
                <p>Reversal Probability: <span id="reversalProb">-</span></p>
            </div>
        </div>
        
        <h3>PATTERN MATRIX (Last 50)</h3>
        <div class="matrix" id="patternMatrix">
            <!-- Matrix will be filled by JavaScript -->
        </div>
    </div>

    <script>
        // Initialize patterns array
        let fullPatterns = [];
        
        // Create 7-digit input buttons
        const digitInput = document.getElementById('digitInput');
        for (let i = 0; i < 7; i++) {
            const btn = document.createElement('button');
            btn.className = 'digit-btn';
            btn.textContent = (i + 1);
            btn.dataset.position = i;
            btn.dataset.selected = 'none';
            
            btn.addEventListener('click', function() {
                if (this.dataset.selected === 'none') {
                    this.dataset.selected = 'big';
                    this.classList.add('selected-big');
                    this.textContent = 'B';
                } else if (this.dataset.selected === 'big') {
                    this.dataset.selected = 'small';
                    this.classList.remove('selected-big');
                    this.classList.add('selected-small');
                    this.textContent = 'S';
                } else {
                    this.dataset.selected = 'none';
                    this.classList.remove('selected-small');
                    this.textContent = (i + 1);
                }
            });
            
            digitInput.appendChild(btn);
        }
        
        // Submit button handler
        document.getElementById('submitBtn').addEventListener('click', function() {
            const digitButtons = document.querySelectorAll('.digit-btn');
            let pattern = [];
            let allSelected = true;
            
            digitButtons.forEach(btn => {
                if (btn.dataset.selected === 'big') {
                    pattern.push(true);
                } else if (btn.dataset.selected === 'small') {
                    pattern.push(false);
                } else {
                    allSelected = false;
                }
            });
            
            if (!allSelected) {
                alert('Please select all 7 digits (Big or Small)');
                return;
            }
            
            // Add the pattern to history
            fullPatterns = fullPatterns.concat(pattern);
            
            // Analyze the pattern
            analyzePattern();
            
            // Reset the buttons
            digitButtons.forEach(btn => {
                btn.dataset.selected = 'none';
                btn.className = 'digit-btn';
                btn.textContent = parseInt(btn.dataset.position) + 1;
            });
        });
        
        function analyzePattern() {
            // Calculate stats
            const totalBig = fullPatterns.filter(x => x).length;
            const totalSmall = fullPatterns.filter(x => !x).length;
            
            // Update basic stats
            document.getElementById('totalBig').textContent = totalBig;
            document.getElementById('totalSmall').textContent = totalSmall;
            document.getElementById('totalRounds').textContent = fullPatterns.length;
            
            // Calculate trends
            const last50 = fullPatterns.slice(-50);
            const last50Big = last50.filter(x => x).length;
            const last50Small = last50.length - last50Big;
            
            const last20 = fullPatterns.slice(-20);
            const last20Big = last20.filter(x => x).length;
            const last20Small = last20.length - last20Big;
            
            const last10 = fullPatterns.slice(-10);
            const last10Big = last10.filter(x => x).length;
            const last10Small = last10.length - last10Big;
            
            // Update trend display
            document.getElementById('last50Trend').innerHTML = 
                `<span class="big">${Math.round(last50Big/last50.length*100)}% Big</span>, 
                 <span class="small">${Math.round(last50Small/last50.length*100)}% Small</span>`;
            
            document.getElementById('last20Trend').innerHTML = 
                last20.length > 0 ? 
                `<span class="big">${Math.round(last20Big/last20.length*100)}% Big</span>, 
                 <span class="small">${Math.round(last20Small/last20.length*100)}% Small</span>` : '-';
            
            document.getElementById('last10Trend').innerHTML = 
                last10.length > 0 ? 
                `<span class="big">${Math.round(last10Big/last10.length*100)}% Big</span>, 
                 <span class="small">${Math.round(last10Small/last10.length*100)}% Small</span>` : '-';
            
            // Calculate streaks
            let currentStreak = 0;
            let currentType = null;
            let maxBigStreak = 0;
            let maxSmallStreak = 0;
            
            fullPatterns.forEach(result => {
                if (currentType === null) {
                    currentType = result;
                    currentStreak = 1;
                } else if (currentType === result) {
                    currentStreak++;
                } else {
                    if (currentType && currentStreak > maxBigStreak) {
                        maxBigStreak = currentStreak;
                    } else if (!currentType && currentStreak > maxSmallStreak) {
                        maxSmallStreak = currentStreak;
                    }
                    currentType = result;
                    currentStreak = 1;
                }
            });
            
            // Check the last streak
            if (currentType && currentStreak > maxBigStreak) {
                maxBigStreak = currentStreak;
            } else if (!currentType && currentStreak > maxSmallStreak) {
                maxSmallStreak = currentStreak;
            }
            
            document.getElementById('maxBigStreak').textContent = maxBigStreak;
            document.getElementById('maxSmallStreak').textContent = maxSmallStreak;
            
            // Calculate reversal probability (simplified)
            let reversalProb = '50%';
            if (fullPatterns.length >= 3) {
                const last = fullPatterns[fullPatterns.length - 1];
                const secondLast = fullPatterns[fullPatterns.length - 2];
                const thirdLast = fullPatterns[fullPatterns.length - 3];
                
                if (last === secondLast && secondLast === thirdLast) {
                    // After 3 same results, higher chance of reversal
                    reversalProb = '68%';
                } else if (last !== secondLast) {
                    // After a change, slightly higher chance of continuation
                    reversalProb = '55%';
                }
            }
            document.getElementById('reversalProb').textContent = reversalProb;
            
            // Generate prediction
            let prediction;
            if (last10.length >= 5) {
                if (last10Big >= 7) {
                    prediction = {
                        result: "Small",
                        confidence: "72%",
                        reason: "Strong Big streak in last 10 (reversal likely)"
                    };
                } else if (last10Small >= 7) {
                    prediction = {
                        result: "Big",
                        confidence: "70%",
                        reason: "Strong Small streak in last 10 (reversal likely)"
                    };
                } else {
                    // If no strong streak, predict based on overall trend
                    const bigProb = totalBig / fullPatterns.length;
                    if (bigProb > 0.55) {
                        prediction = {
                            result: "Small",
                            confidence: Math.round(bigProb * 100) + "%",
                            reason: "Overall Big probability is high (reversal likely)"
                        };
                    } else if (bigProb < 0.45) {
                        prediction = {
                            result: "Big",
                            confidence: Math.round((1 - bigProb) * 100) + "%",
                            reason: "Overall Small probability is high (reversal likely)"
                        };
                    } else {
                        // If balanced, predict same as last
                        const lastResult = fullPatterns[fullPatterns.length - 1];
                        prediction = {
                            result: lastResult ? "Small" : "Big",
                            confidence: "58%",
                            reason: "Balanced probability (slight reversal tendency)"
                        };
                    }
                }
            } else {
                prediction = {
                    result: "Insufficient data",
                    confidence: "-",
                    reason: "Need more patterns to make prediction"
                };
            }
            
            // Display result
            const resultDiv = document.getElementById('predictionResult');
            resultDiv.innerHTML = `
                <div style="margin-bottom:10px;">Last 7-digit pattern: ${getLastPatterns(7)}</div>
                <div style="font-size:24px;margin:15px 0;">
                    Next prediction: 
                    <span class="${prediction.result === 'Big' ? 'big' : 'small'}" style="font-size:32px;">
                        ${prediction.result.toUpperCase()}
                    </span>
                </div>
                <div>Confidence: <span class="big">${prediction.confidence}</span></div>
                <div>Reason: ${prediction.reason}</div>
                <div style="margin-top:15px;border-top:1px dashed #0f0;padding-top:10px;">
                    Recent pattern: ${getLastPatterns(10)}
                </div>
            `;
            
            // Update matrix display
            const matrixDiv = document.getElementById('patternMatrix');
            matrixDiv.innerHTML = '';
            
            const displayPatterns = fullPatterns.slice(-50);
            displayPatterns.forEach((pattern, index) => {
                const cell = document.createElement('div');
                cell.className = `matrix-cell ${pattern ? 'big' : 'small'}`;
                cell.textContent = pattern ? 'B' : 'S';
                matrixDiv.appendChild(cell);
            });
        }
        
        function getLastPatterns(count) {
            const last = fullPatterns.slice(-count);
            return last.map(p => p ? '<span class="big">B</span>' : '<span class="small">S</span>').join(' ');
        }
    </script>
</body>
</html>