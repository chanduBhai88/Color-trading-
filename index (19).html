<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Khatarnak Predictor v7.4</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: #000;
      color: #0f0;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    #prediction {
      font-size: 24px;
      padding: 10px 20px;
      border: 2px solid #0f0;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    #timer {
      font-size: 22px;
      margin-bottom: 20px;
    }

    canvas {
      background: #111;
      border: 1px solid #0f0;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    table {
      width: 320px;
      background: #111;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #0f0;
      padding: 6px 8px;
      text-align: center;
    }

    th {
      background: #070;
    }
  </style>
</head>
<body>

  <div id="prediction">Prediction Loading...</div>
  <div id="timer">00:00</div>

  <canvas id="myChart" width="320" height="180"></canvas>

  <table id="resultTable">
    <thead>
      <tr><th>#</th><th>Result</th><th>Number</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // Chart Setup
    const ctx = document.getElementById('myChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [],
        datasets: [{
          label: 'Predicted Number',
          data: [],
          backgroundColor: '#0f0'
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true, ticks: { color: '#0f0' } },
          x: { ticks: { color: '#0f0' } }
        },
        plugins: {
          legend: { labels: { color: '#0f0' } }
        }
      }
    });

    let history = [];

    function getSmartPrediction() {
      const result = Math.random() > 0.5 ? "Big" : "Small";
      const number = result === "Big"
        ? [5,6,7,8,9][Math.floor(Math.random()*5)]
        : [0,1,2,3,4][Math.floor(Math.random()*5)];
      return { result, number };
    }

    function updateChart(label, number) {
      if (chart.data.labels.length >= 10) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }
      chart.data.labels.push(label);
      chart.data.datasets[0].data.push(number);
      chart.update();
    }

    function updateTable() {
      const tbody = document.querySelector("#resultTable tbody");
      tbody.innerHTML = "";
      history.slice().reverse().forEach((entry, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${history.length - index}</td><td>${entry.result}</td><td>${entry.number}</td>`;
        tbody.appendChild(row);
      });
    }

    // âœ… Stylish Timer + Prediction Logic
    let lastSecond = -1;
    setInterval(() => {
      const now = new Date();
      const minutes = now.getMinutes();
      const seconds = now.getSeconds();

      // Update Timer
      document.getElementById('timer').textContent =
        String(minutes).padStart(2, '0') + ':' + String(seconds).padStart(2, '0');

      // Prediction every 15 seconds (for testing/demo)
      if (seconds % 15 === 0 && lastSecond !== seconds) {
        const prediction = getSmartPrediction();
        document.getElementById('prediction').textContent = `ðŸ§  Predicted: ${prediction.result} - ${prediction.number}`;
        history.push(prediction);
        if (history.length > 20) history.shift();
        updateChart(prediction.result, prediction.number);
        updateTable();
        lastSecond = seconds;
      }
    }, 1000);
  </script>

</body>
</html>